
{%extends "layout.html"%}

{%block body_content%}
    {% for i in range(10) %}
        <h1>{{IrrigationValve.valveList[i].name}}</h1>
        <form method="POST" action="">
            {#{{ form.hidden_tag() }}#}
        <table class="table table-striped table-bordered">
            <tbody>
                <tr>
                    <td>{{ formList[i].valveName.label(class="form-control-label") }} </td>
                    <td>
                        <div class="form-group">

                            {% if formList[i].valveName.errors %}
                                {{ formList[i].valveName(class="form-control form-control-lg is-invalid") }}
                                <div class="invalid-feedback">
                                    {% for error in valve.valveName.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ formList[i].valveName(class="form-control form-control-lg") }}
                            {% endif %}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Notes</td>
                    <td>
                        <div>
                            {{ formList[i].valveNotes(class="form-control form-control-lg") }}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>current state</td>
                    <td>{{IrrigationValve.valveList[i].currentStateOn | trueFalseIndicator()}}</td>
                </tr>
                <tr>
                    <td>on/off</td>
                    <td>
                        <div class="form-group">
                            {{ formList[i].valveOnOff(class="form-control form-control-lg", value=IrrigationValve.valveList[i].currentStateOn) }}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>testing</td>
                    <td>
                        <button type="submit" name="action" class="btn btn-danger" value="test">TEST</button>
                    </td>
                </tr>
                <tr>
                    <td>cycle or irrigate</td>
                    <td>
                        <div class="form-group">
                            {{ formList[i].valveCycleIrrigate(class="form-control form-control-lg", value=IrrigationValve.valveList[i].cycleOrIrrigate) }}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>irrigation times</td>
                    <td>
                        {% if not IrrigationValve.valveList[i].irrigationTimes %}
                            None 
                        {% else %}
                            {% for key, value in IrrigationValve.valveList[i].irrigationTimes.items() %} 
                                time: {{ key | strf_time_converter() }}  duration: {{ value | deltaToHrMinSec() }}
                                <button type="submit" name="action" id="{{ key }}" value="irrigation-time-delete" class="btn btn-danger">Delete</button>
                            {% endfor %} 
                        {% endif %}
                        <br><br>
                        <div class="form-group">
                            {{ formList[i].valveIrrigationTime() }}
                            <button type="submit" name="action" value="irrigation-time-add" class="btn btn-primary">Add</button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>cycle on time</td>
                    <td>
                        {%if not IrrigationValve.valveList[i].cycleOnTime%}
                            None<br><br>
                            <div>
                                <label>Hours</label>
                                {{ formList[i].cycleOnTimeHour() }} <br>
                                <label>Minutes</label>
                                {{ formList[i].cycleOnTimeMinute }} <br>
                                <label>Seconds</label>
                                {{ formList[i].cycleOnTimeSeconds }} <br>
                                <button type="submit" name="action" value="cycle-on-time-add" class="btn btn-primary">Add</button>
                            </div>
                        {%else%}
                            {{IrrigationValve.valveList[i].cycleOnTime | HrMinSec()}}
                            <button type="submit" name="action" value="cycle-on-time-delete" class="btn btn-primary">delete</button>
                        {%endif%}
                        <br><br>
                    </td>
                </tr>
                <tr>
                    <td>cycle off time</td>
                    <td>
                        {%if not IrrigationValve.valveList[i].cycleOffTime%}
                            None<br><br>
                            <form>
                                <div>
                                    <label>Hours</label>
                                    {{ formList[i].cycleOffTimeHour }}<br>
                                    <label>Minutes</label>
                                    {{ formList[i].cycleOffTimeMinute }}<br>
                                    <label>Seconds</label>
                                    {{ formList[i].cycleOffTimeSeconds }}<br>
                                    <button type="button" name="action" value="cycle-off-time-add" class="btn btn-primary">Add</button>
                                </div>
                            </form>
                        {%else%}
                            {{IrrigationValve.valveList[i].cycleOffTime | HrMinSec()}}
                            <button type="submit" name="action" value="cycle-off-time-delete" class="btn btn-primary">delete</button>
                        {%endif%}
                        <br><br>
                    </td>
                </tr>
                <tr>
                    <td>blackout start</td>
                    <td>
                        {%if not IrrigationValve.valveList[i].blackoutStart%}
                            None
                            <br><br>
                            {{ formList[i].blackoutStart }}
                            <button type="submit" name="action" value="blackout-start-add" class="btn btn-primary">Add</button>
                        {%else%}
                            {{IrrigationValve.valveList[i].blackoutStart | strftimeConverter()}}
                            <button type="submit" name="action" value="blackout-start-delete" class="btn btn-primary">delete</button>
                        {%endif%}
                    </td>
                </tr>
                <tr>
                    <td>blackout stop</td>
                    <td>
                        {%if not IrrigationValve.valveList[i].blackoutStop%}
                            None
                            <br><br>
                            {{ formList[i].blackoutStop }}
                            <button type="submit" name="action" value="blackout-stop-add" class="btn btn-primary">Add</button>
                        {%else%}
                            {{IrrigationValve.valveList[i].blackoutStop | strftimeConverter()}}
                            <button type="submit" name="action" value="blackout-stop-delete" class="btn btn-primary">delete</button>
                        {%endif%}
                    </td>
                </tr>
                <tr>
                    <td>days</td>
                    <td>
                        {{ formList[i].selectAll }}{{ formList[i].selectAll.label }}<br>
                        <br>
                        {{ formList[i].monday }}{{ formList[i].monday.label }}<br>
                        {{ formList[i].tuesday }}{{ formList[i].tuesday.label }}<br>
                        {{ formList[i].wednesday }}{{ formList[i].wednesday.label }}<br>
                        {{ formList[i].thursday }}{{ formList[i].thursday.label }}<br>
                        {{ formList[i].friday }}{{ formList[i].friday.label }}<br>
                        {{ formList[i].saturday }}{{ formList[i].saturday.label }}<br>
                        {{ formList[i].sunday }}{{ formList[i].sunday.label }}<br>
                    </td>
                </tr>
            </tbody>
        </table>
               <input class="btn-success btn-block btn-lg" type="submit" name="action" value="submit">
        </form>
    {% endfor %}
{%endblock%}
